<div class="main-content">
  <div class="container-fluid">
    <div class="row">
      <div class="card">
        <div class="card-header" data-background-color="primary">
          <h4 class="title">Rotas</h4>
          <p class="category">Selecione uma rota para maiores informações</p>
        </div>
        <div class="card-content table-responsive">
          <ngx-datatable class="material" [rows]="this.rotas" [loadingIndicator]="loading" [columnMode]="'flex'" [headerHeight]="30"
            [footerHeight]="50" [rowHeight]="52" [limit]="5" [messages]='messages' [selected]="selectedRoute" [selectionType]="'single'"
            (select)='onSelectRoute($event)'>
            <ngx-datatable-column name="dataInicio" [flexGrow]="1">
              <ng-template let-column="column" ngx-datatable-header-template>
                <span class="text-primary">Data</span>
              </ng-template>
              <ng-template let-value="value" ngx-datatable-cell-template>
                {{value | amCalendar}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="descricao" [flexGrow]="3">
              <ng-template let-column="column" ngx-datatable-header-template>
                <span class="text-primary">Descrição</span>
              </ng-template>
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                {{value | titlecase}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="operador" [flexGrow]="2">
              <ng-template let-column="column" ngx-datatable-header-template>
                <span class="text-primary">Operador</span>
              </ng-template>
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                {{value.name | titlecase}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="emissor" [flexGrow]="2">
              <ng-template let-column="column" ngx-datatable-header-template>
                <span class="text-primary">Emissor</span>
              </ng-template>
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                {{value.name | titlecase}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="estatus" [flexGrow]="1">
              <ng-template let-column="column" ngx-datatable-header-template>
                <span class="text-primary">Estatus</span>
              </ng-template>
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                {{value | titlecase}}
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Ações" [flexGrow]="2">
              <ng-template let-column="column" ngx-datatable-header-template>
                <span class="text-primary">Ações</span>
              </ng-template>
              <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                <button type="button" rel="tooltip" title="Trocar Operador" style="margin: 0" class="btn btn-primary btn-simple btn-xs">
                                            <i class="material-icons">assignment_ind</i>
                                        </button>
                <button type="button" rel="tooltip" title="Editar" style="margin: 0" class="btn btn-primary btn-simple btn-xs">
                                            <i class="material-icons">edit</i>
                                        </button>
                <button type="button" rel="tooltip" title="Cancelar" style="margin: 0" class="btn btn-warning btn-simple btn-xs">
                                            <i class="material-icons">cancel</i>
                                        </button>
                <button type="button" rel="tooltip" title="Excluir" style="margin: 0" class="btn btn-danger btn-simple btn-xs">
                                            <i class="material-icons">delete</i>
                                        </button>
              </ng-template>
            </ngx-datatable-column>

          </ngx-datatable>

        </div>
      </div>
    </div>
    <div class="row" *ngIf="this.isRouteSelected">
      <div class="card">
        <div class="card card-nav-tabs">
          <div class="card-header" data-background-color="primary">
            <div class="nav-tabs-navigation">
              <div class="nav-tabs-wrapper">
                <ul class="nav nav-tabs" data-tabs="tabs">
                  <li class="">
                    <a href="#entregaDetails" data-toggle="tab">
                    <i class="material-icons">storage</i> Detalhes da rota
                    <div class="ripple-container"></div>
                  </a>
                  </li>
                  <li class="active">
                    <a href="#tracking" data-toggle="tab">
                    <i class="material-icons">track_changes</i> Dados de Monitoramento
                    <div class="ripple-container"></div>
                  </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class="card-content">
            <div class="tab-content">
              <div class="tab-pane" id="entregaDetails">
                <div class="row">
                </div>
              </div>
              <div class="tab-pane active" id="tracking">
                <div class="row">
                  <div class="col-md-4">
                    <ngx-datatable class="material" [rows]="this.mapaPontos" [loadingIndicator]="loading" [columnMode]="'force'" [headerHeight]="30"
                      [footerHeight]="50" [rowHeight]="52" [limit]="5" [messages]='messages'>
                      <ngx-datatable-column name="iconStyle" [width]="15">
                        <ng-template let-column="column" ngx-datatable-header-template>
                          <span class="text-primary"></span>
                        </ng-template>
                        <ng-template let-value="value" ngx-datatable-cell-template>
                          <div [ngStyle]="value" style="margin-top: -6px;">
                          </div>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="content" [width]="50">
                        <ng-template let-column="column" ngx-datatable-header-template>
                          <span class="text-primary">Data</span>
                        </ng-template>
                        <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                          {{value.lastUpdated | amCalendar}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="content" [width]="100">
                        <ng-template let-column="column" ngx-datatable-header-template>
                          <span class="text-primary">Destino</span>
                        </ng-template>
                        <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                          {{value.name | uppercase}}
                        </ng-template>
                      </ngx-datatable-column>

                      <ngx-datatable-column name="content" [width]="50">
                        <ng-template let-column="column" ngx-datatable-header-template>
                          <span class="text-primary">Estatus</span>
                        </ng-template>
                        <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                          {{value.contentStatus | titlecase}}
                        </ng-template>
                      </ngx-datatable-column>

                    </ngx-datatable>
                  </div>
                  <div class="col-md-8">
                    <mapa-cmp class="map-container card" style="min-height:600px;margin:0" [pontos]="mapaPontos" (mapLoaded)="mapLoaded()"></mapa-cmp>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
